setwd("G:\Equi7")
setwd("G:\\Equi7")
source(.trPaths[5], echo=TRUE, max.deparse.length=150)
t.lst <- list.files(path="EQUI7_V13_GRIDS/", pattern="*_PROJ_TILE_T3.shp$", full.names = TRUE, recursive = TRUE)
str(t.lst)
t.lst <- list.files(path="EQUI7_V13_GRIDS", pattern="*_PROJ_TILE_T3.shp$", full.names = TRUE, recursive = TRUE)
str(t.lst)
equi7t3 <- list(NULL)
source(.trPaths[5], echo=TRUE, max.deparse.length=150)
save(equi7t3, file="equi7t3.rda")
spplot(equi7t3)
spplot(equi7t3[[1]])
str(equi7t3[[1]])
plotKML(equi7t3[[1]])
library(plotKML)
plotKML(equi7t3[[1]])
plotKML(equi7t3[[2]])
plotKML(equi7t3[[3]])
plotKML(equi7t3[[4]])
plotKML(equi7t3[[5]])
plotKML(equi7t3[[6]])
plotKML(equi7t3[[7]])
save(equi7t3, file="equi7t3.rda")
str(as.data.frame(equi7t3[[1]]))
plot(equi7t3[[7]])
i=1
j=1
t_srs <- proj4string(equi7t3[[i]])
t_srs
nfile <- paste0("tiled/", equi7t3[[i]][j,"SHORTNAME"], "_", equi7t3[[i]][j,"TILE"], ".tif")
nfile <- paste0("tiled/", equi7t3[[i]]@data[j,"SHORTNAME"], "_", equi7t3[[i]]@data[j,"TILE"], ".tif")
nfile
nfile <- paste0("tiled/DEM_", strsplit(equi7t3[[i]]@data[j,"SHORTNAME"], " ")[[1]][2], "_", equi7t3[[i]]@data[j,"TILE"], ".tif")
nfile <- paste0("tiled/DEM_", strsplit(equi7t3[[i]]@data[j,"SHORTNAME"], "E7G ")[[1]][2], "_", equi7t3[[i]]@data[j,"TILE"], ".tif")
strsplit(equi7t3[[i]]@data[j,"SHORTNAME"], "E7G ")
?strsplit
strsplit(equi7t3[[i]]@data[j,"SHORTNAME"], split="E7G")
strsplit(equi7t3[[1]]@data[j,"SHORTNAME"], split="E7G")
equi7t3[[1]]@data[j,"SHORTNAME"]
nfile <- paste0("tiled/DEM_", strsplit(paste(equi7t3[[i]]@data[j,"SHORTNAME"]), " ")[[1]][2], "_", equi7t3[[i]]@data[j,"TILE"], ".tif")
nfile
i
j
te <- equi7t3[[i]][j]@bbox
t
te <- bbox(equi7t3[[i]][j,])
te
te <- as.vector(bbox(equi7t3[[i]][j,]))
te
j=5
nfile <- paste0("tiled/DEM_", strsplit(paste(equi7t3[[i]]@data[j,"SHORTNAME"]), " ")[[1]][2], "_", equi7t3[[i]]@data[j,"TILE"], ".tif")
te <- as.vector(bbox(equi7t3[[i]][j,]))
nfile
te
land.lst <- list.files(path="EQUI7_V13_GRIDS", pattern="*_PROJ_LAND.shp$", full.names = TRUE, recursive = TRUE)
land.lst
source(.trPaths[5], echo=TRUE, max.deparse.length=150)
plot(equi7land[[1]])
save(equi7land, file="equi7land.rda")
ov.l <- NULL
i=1
ov.l[[i]] <- over(equi7land[[i]], equi7t3[[i]])
ov.l[[i]] <- over(equi7land[[i]], as(equi7t3[[i]], "SpatialPointsDataFrame"))
ov.l[[i]] <- over(equi7land[[i]], as(equi7t3[[i]], "SpatialLinesDataFrame"))
library(rgeos)
ov.l[[i]] <- gIntersection(equi7land[[i]], equi7t3[[i]])
?gIntersection
ov.l[[i]] <- gIntersection(equi7land[[i]], equi7t3[[i]], drop_not_poly=TRUE)
ov.l[[i]] <- gUnion(equi7land[[i]], equi7t3[[i]])
plot(equi7t3[[i]])
lines(equi7land[[i]])
lines(as(equi7land[[i]], "SpatialLines"))
ov.l[[i]] <- gIntersection(equi7t3[[i]], as(equi7land[[i]], "SpatialLines"))
ov.l[[i]] <- gIntersection(as(equi7t3[[i]], "SpatialPolygons"), as(equi7land[[i]], "SpatialLines"))
?vect2rast
ov.l[[i]] <- over(vect2rast(equi7t3[[i]], cell.size=300000), equi7land[[i]])
str(ov.l[[i]])
plot(vect2rast(equi7t3[[i]], cell.size=300000))
names(equi7t3[[i]])
str(equi7t3[[i]]#data)
str(equi7t3[[i]]@data)
plot(equi7land[[1]])
lines(as(equi7t3[[1]], "SpatialLines"))
source(.trPaths[5], echo=TRUE, max.deparse.length=150)
source(.trPaths[5], echo=TRUE, max.deparse.length=150)
save(equi7land, file="equi7land.rda")
save(equi7t3, file="equi7t3.rda")
q()
source(.trPaths[5], echo=TRUE, max.deparse.length=150)
t.lst
names(equi7t3) <- c.lst <- c("AF", "AN", "AS", "EU", "NA", "OC", "SA")
names(equi7land) <- c.lst <- c("AF", "AN", "AS", "EU", "NA", "OC", "SA")
land.lst
save(equi7land, file="equi7land.rda")
save(equi7t3, file="equi7t3.rda")
plot(equi7land[[1]])
lines(as(equi7t3[[1]], "SpatialLines"))
plot(equi7land[[4]])
lines(as(equi7t3[[4]], "SpatialLines"))
plot(equi7land[[2]])
lines(as(equi7t3[[2]], "SpatialLines"))
plot(equi7land[[3]])
lines(as(equi7t3[[3]], "SpatialLines"))
plot(equi7land[[5]])
lines(as(equi7t3[[5]], "SpatialLines"))
plot(equi7land[[6]])
lines(as(equi7t3[[6]], "SpatialLines"))
plot(equi7land[[7]])
lines(as(equi7t3[[7]], "SpatialLines"))
q()
source(.trPaths[5], echo=TRUE, max.deparse.length=150)
str(equi7t3[[1]][1])
str(equi7t3[[1]])
load("equi7t3.rda")
str(equi7t3[[1]])
str(equi7t3[[1]]@data)
s8 <- list(Zone=c("AF", "OC", "AS", "AS", "EU", "NA", "SA", "SA"), TILE=c("072_048", "087_063", "072_087", "048_003", "051_012", "060_036", "072_066", "090_048"))
s8.equi7t3 <- list(NULL)
s8 <- list(Zone=c("AF", "OC", "AS", "AS", "EU", "NA", "SA", "SA"), TILE=c("072_048", "087_063", "072_087", "048_003", "051_012", "060_036", "072_066", "090_048"))
s8
source(.trPaths[5], echo=TRUE, max.deparse.length=150)
s8.equi7t3 <- do.call(rbind, s8.equi7t3)
str(s8.equi7t3)
plot(s8.equi7t3)
plot(s8.equi7t3[[1]])
plot(s8.equi7t3[[8]])
paste0(s8$Zone, "_", s8$TILE)
source(.trPaths[5], echo=TRUE, max.deparse.length=150)
save(s8.equi7t3, file="s8.equi7t3.rda")
s8.equi7t3.ll <- lapply(s8.equi7t3, spTransform, CRS("+proj=longlat +datum=WGS84"))
s8.equi7t3.ll <- do.call(rbind, s8.equi7t3.ll)
plotKML(s8.equi7t3.ll, filename="s8.equi7t3.kml", folder.name="S8")
library(plotKML)
plotKML(s8.equi7t3.ll, filename="s8.equi7t3.kml", folder.name="S8")
data(landmask)
library(GSIF)
data(landmask)
gridded(landmask) <- ~x+y
proj4string(landmask) <- "+proj=longlat +datum=WGS84"
source(.trPaths[5], echo=TRUE, max.deparse.length=150)
?spplot
spplot(landmask["mask"], col.regions="grey", sp.layout=list(list("sp.lines", country), list("sp.polygons", s8.equi7t3.ll)))
spplot(landmask["soilmask"], col.regions="grey", sp.layout=list(list("sp.polygons", s8.equi7t3.ll), list("sp.lines", country)))
image(landmask["soilmask"])
image(landmask["mask"], col="grey")
str(landmask)
summary(landmask$mask)
mask <- landmask[landmask$mask==100,"mask"]
spplot(mask, col.regions="grey", sp.layout=list(list("sp.polygons", s8.equi7t3.ll), list("sp.lines", country)))
country <- as(map2SpatialPolygons(country.m, IDs=IDs), "SpatialLines")
plot(country)
spplot(mask, col.regions="grey", sp.layout=list(list("sp.polygons", s8.equi7t3.ll, col="red"), list("sp.lines", country)))
spplot(mask, col.regions="grey", sp.layout=list(list("sp.lines", country), list("sp.polygons", s8.equi7t3.ll, col="red")), scales=list(draw=TRUE))
spplot(s8.equi7t3.ll)
str(s8.equi7t3.ll@data)
spplot(s8.equi7t3.ll["COVERSLAND"])
spplot(mask, col.regions="grey", sp.layout=list("sp.polygons", s8.equi7t3.ll["COVERSLAND"], col="red"), scales=list(draw=TRUE)) ## list(list("sp.lines", country), list("sp.polygons", s8.equi7t3.ll["COVERSLAND"], col="red"))
mask <- landmask[landmask$mask>10,"mask"]
spplot(country, sp.layout=list("sp.polygons", s8.equi7t3.ll["COVERSLAND"], col="red"), scales=list(draw=TRUE)) ## list(list("sp.lines", country), list("sp.polygons", s8.equi7t3.ll["COVERSLAND"], col="red"))
spplot(s8.equi7t3.ll["COVERSLAND"], col="red", sp.layout=list("sp.lines", country), scales=list(draw=TRUE))
spplot(s8.equi7t3.ll["COVERSLAND"], col.regions="red", sp.layout=list("sp.lines", country), scales=list(draw=TRUE))
spplot(s8.equi7t3.ll["COVERSLAND"], col.regions="red", sp.layout=list("sp.lines", country), scales=list(draw=TRUE), xlim=c(-180,180), ylim=c(-90,90))
spplot(s8.equi7t3.ll["COVERSLAND"], col.regions="red", sp.layout=list("sp.lines", country), scales=list(draw=TRUE), xlim=c(-180,180), ylim=c(-90,90), key=list(lines=TRUE, col="transparent"))
spplot(s8.equi7t3.ll["COVERSLAND"], col.regions="red", sp.layout=list("sp.lines", country), scales=list(draw=TRUE), xlim=c(-180,180), ylim=c(-90,90), colorkey=list(lines=TRUE, col="transparent"))
spplot(s8.equi7t3.ll["COVERSLAND"], col.regions="red", sp.layout=list("sp.lines", country), scales=list(draw=TRUE), xlim=c(-180,180), ylim=c(-90,90), colorkey=list(lines=FALSE, col="transparent"))
spplot(s8.equi7t3.ll["COVERSLAND"], col.regions="red", sp.layout=list("sp.lines", country), scales=list(draw=TRUE), xlim=c(-180,180), ylim=c(-90,90), colorkey=FALSE)
mask <- landmask[landmask$mask>10,"mask"]
plot(raster(mask))
library(raster)
plot(raster(mask))
polygons(s8.equi7t3.ll)
polygon(s8.equi7t3.ll)
?polygon
lines(s8.equi7t3.ll)
lines(as(s8.equi7t3.ll, "SpatialLines"))
plot(raster(mask), col="grey")
lines(as(s8.equi7t3.ll, "SpatialLines"))
q()
